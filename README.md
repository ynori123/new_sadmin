# 成果物
https://github.com/ynori123/new_sadmin

http://157.7.87.159

## 開発に至った経緯
PythonのFlaskを用いたアルバイト先のシフト管理Webアプリケーションです。アルバイト先では、シフトを提出する際、店長の個人LINEもしくは紙に書いて提出し、店長がシフトを作る際は、LINEで提出されたシフトも一度紙に書き写して整理してからExcelシートにシフトを作成し、公開するという流れでアルバイトのシフトを管理していました。私はそこに着目し、シフトの提出から公開まで1つのWebアプリケーションにすることができれば、店長の負担が軽減する上、シフトがより早くアルバイトに公開することができると考えたので、このWebアプリケーションを作成しました。

## 技術スタック
- メイン：Python Flask 2.2.3
- テンプレートエンジン：Jinja2 3.1.2
- データベース：Sqlite3
- ORM：Flask-SQLAlchemy
- 実行環境：Conoha VPS

数十人程度の従業員が使う小規模なアプリケーションのため、データベースは導入しやすいSqlite3を利用しました。

## 役割
個人開発です。仕様設計からデプロイまで私が行いました。

## 開発内容
### 概要
アルバイトは、従業員ページからログインし、シフトを提出します。シフトを提出すると、内容は`PostedShift`データベースに保存されます。店長は、`PostedShift`の内容が確認できる`シフトを確認`画面から提出されたシフトを確認し、シフトを編集します。
`シフトを確認`画面は次の図のとおりです。
<img src='./1.png'>
<img src='./2.png'>

名前と出勤可能時間の列には、出勤できないと提出したアルバイトの情報をのぞいた`PostedShift`の内容が表示されており、それを加味して出勤させる人の出勤時間とポジションを入力することで、`FinalShift`データベースに情報が反映され、アルバイトがシフトを確認できるようになります。

### データベース
```mermaid
erDiagram
User ||--o{ PostedShift :"0以上7以下(曜日ごとにデータベースに登録)"
PostedShift ||--o| FinalShift :"0以上1以下（出勤可能でもシフトが入らないこともある）"

User {
    int id PK
    string email
    string password "暗号化されたパスワード"
    string name "表示名"
    int wages "時給"
}
PostedShift {
    int id PK
    int dayofweek "曜日(0~7)"
    string name "表示名"
    string begin "出勤時間"
}
FinalShift {
    int id PK
    int dayofweek "曜日(0~7)"
    string name "表示名"
    string begin "出勤時間"
    string position "ポジション"
}
```

## 苦労した点
最も苦労したところは、設計です。設計する際、どうすればよりシンプルなコードでシンプルなシステムになり、店長もアルバイトもより使いやすくなるかを考えルノに苦労しました。特に工夫した点は、1度シフトを提出しても、書き換えできるようにしている点です。現在の携帯では、アルバイトは、LINEでシフトを提出した際、店長の既読がついたら店長がもうすでに紙に提出したシフトを書き写しているので、シフトを出し直せないという問題点がありました。このアプリケーションでは、店長のシフトを作成する際の負担だけでなく、その問題のようなアルバイトの負担も解消することができるように工夫しました。

## 改善点
実際にあるバイト先で一週間運用していただき、アルバイトや社員さんからフィードバックを集めたところ、パソコンでシフトを編集する店長からはすごく便利だと好評だったが、アルバイトからは、スマートフォンのUIが使いにくいとの指摘を受けたので、現在スマートフォン向けUIの改修を行っています。

